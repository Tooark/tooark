# Release Notes v3.1.0

Data de lançamento: 09/01/2026

## ⚠️ Breaking Changes

Esta versão contém mudanças de nomenclatura em propriedades e parâmetros das entidades.

### Tooark.Entities - Padronização de Nomenclatura

Todas as propriedades e parâmetros que representam identificadores de usuários foram renomeados para incluir o sufixo `Id`, tornando a nomenclatura mais clara e consistente.

#### Mudanças em `InitialEntity`

| Propriedade/Parâmetro Anterior | Novo Nome     |
| ------------------------------ | ------------- |
| `CreatedBy` (propriedade)      | `CreatedById` |
| `createdBy` (parâmetro)        | `createdById` |

#### Mudanças em `DetailedEntity`

| Propriedade/Parâmetro Anterior | Novo Nome     |
| ------------------------------ | ------------- |
| `UpdatedBy` (propriedade)      | `UpdatedById` |
| `createdBy` (parâmetro)        | `createdById` |
| `updatedBy` (parâmetro)        | `updatedById` |

#### Mudanças em `VersionedEntity`

| Parâmetro Anterior | Novo Nome     |
| ------------------ | ------------- |
| `createdBy`        | `createdById` |
| `updatedBy`        | `updatedById` |

#### Mudanças em `SoftDeletableEntity`

| Parâmetro Anterior | Novo Nome     |
| ------------------ | ------------- |
| `createdBy`        | `createdById` |
| `changedBy`        | `changedById` |

#### Mudanças em `AuditableEntity`

| Propriedade/Parâmetro Anterior | Novo Nome      |
| ------------------------------ | -------------- |
| `DeletedBy` (propriedade)      | `DeletedById`  |
| `RestoredBy` (propriedade)     | `RestoredById` |
| `createdBy` (parâmetro)        | `createdById`  |
| `updatedBy` (parâmetro)        | `updatedById`  |
| `deletedBy` (parâmetro)        | `deletedById`  |
| `restoredBy` (parâmetro)       | `restoredById` |

#### Mudanças em `FileEntity`

| Parâmetro Anterior | Novo Nome     |
| ------------------ | ------------- |
| `createdBy`        | `createdById` |

---

## Resumo das Mudanças

### Propriedades Renomeadas

```csharp
// Antes (v3.0.0)
entity.CreatedBy
entity.UpdatedBy
entity.DeletedBy
entity.RestoredBy

// Agora (v3.1.0)
entity.CreatedById
entity.UpdatedById
entity.DeletedById
entity.RestoredById
```

### Parâmetros de Construtores e Métodos

```csharp
// Antes (v3.0.0)
protected InitialEntity(CreatedBy createdBy)
public void SetCreatedBy(CreatedBy createdBy)
public void SetUpdatedBy(UpdatedBy updatedBy)
public void SetDeleted(DeletedBy deletedBy)
public void SetRestored(RestoredBy restoredBy)

// Agora (v3.1.0)
protected InitialEntity(CreatedBy createdById)
public void SetCreatedBy(CreatedBy createdById)
public void SetUpdatedBy(UpdatedBy updatedById)
public void SetDeleted(DeletedBy deletedById)
public void SetRestored(RestoredBy restoredById)
```

---

## Testes Atualizados

### Tooark.Tests/Entities

Todos os testes de entidades foram atualizados para refletir a nova nomenclatura:

| Arquivo                       | Mudanças                                                                 |
| ----------------------------- | ------------------------------------------------------------------------ |
| `AuditableEntityTests.cs`     | Propriedades `CreatedById`, `UpdatedById`, `DeletedById`, `RestoredById` |
| `DetailedEntityTests.cs`      | Propriedades `CreatedById`, `UpdatedById`                                |
| `FileEntityTests.cs`          | Propriedade `CreatedById`                                                |
| `InitialEntityTests.cs`       | Propriedade `CreatedById`                                                |
| `SoftDeletableEntityTests.cs` | Propriedades `CreatedById`, `UpdatedById`                                |
| `VersionedEntityTests.cs`     | Propriedade `CreatedById`                                                |

---

## Documentação Atualizada

O arquivo `README.md` do pacote `Tooark.Entities` foi atualizado para refletir a nova nomenclatura em:

- Tabela de entidades
- Descrição de propriedades
- Exemplos de código
- Tabela de erros/notificações

---

## Migração

### Passo 1: Atualizar acesso às propriedades

```csharp
// Antes
var creator = entity.CreatedBy;
var updater = entity.UpdatedBy;
var deleter = entity.DeletedBy;
var restorer = entity.RestoredBy;

// Depois
var creator = entity.CreatedById;
var updater = entity.UpdatedById;
var deleter = entity.DeletedById;
var restorer = entity.RestoredById;
```

### Passo 2: Atualizar consultas LINQ/EF Core

```csharp
// Antes
var items = await context.Items
    .Where(x => x.CreatedBy == userId)
    .ToListAsync();

// Depois
var items = await context.Items
    .Where(x => x.CreatedById == userId)
    .ToListAsync();
```

### Passo 3: Atualizar mapeamentos (se aplicável)

```csharp
// Antes
builder.Property(x => x.CreatedBy)
    .HasColumnName("created_by");

// Depois
builder.Property(x => x.CreatedById)
    .HasColumnName("created_by");
```

> **Nota:** As colunas no banco de dados permanecem as mesmas (`created_by`, `updated_by`, `deleted_by`, `restored_by`). Apenas os nomes das propriedades C# foram alterados.

---

## Impacto

- **Breaking changes** - Renomeação de propriedades e parâmetros em todas as entidades
- **Sem alteração no banco de dados** - As colunas mantêm os mesmos nomes
- **Compatibilidade** - Os Value Objects (`CreatedBy`, `UpdatedBy`, `DeletedBy`, `RestoredBy`) permanecem com os mesmos nomes

---

## Informações Adicionais

- Tag relacionado: `v3.1.0`
- Data de lançamento: **2026-01-09**
